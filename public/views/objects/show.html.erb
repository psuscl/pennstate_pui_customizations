<a name="main" title="<%= t('internal_links.main') %>"></a>
<%= render partial: 'shared/breadcrumbs' %> <!-- display breadcrumbs at the top of the page -->

<div id="main-content" class="row objects">
  <div class="row" id="info_row">
    <div class="information col-sm-7">
      <%= render partial: 'shared/idbadge', locals: {:result => @result, :props => { :full => true} } %>
    </div>
    <div class="page_actions col-sm-5 right">
    <%= render partial: 'shared/page_actions', locals: {:record => @result, :title => @result.display_string, :url => request.fullpath, :cite => @result.cite } %>
    </div>
  </div>

  <div class="row" id="notes_row">
    <!-- display the sidebar on the left -->
    <% if !@result.instance_of?(DigitalObject) || @has_children %>
      <div id="sidebar" class="sidebar sidebar-container col-sm-4">
        <%
          if @result.kind_of?(DigitalObject)
            heading_text = t('dig_cont_arr')
          else
            heading_text = t('cont_arr')
          end
       %>

       <% if AppConfig[:pui_search_collection_from_archival_objects] && @result.instance_of?(ArchivalObject) %>
         <%= render partial: 'shared/search_collection_form', :locals => {:resource_uri => @result.resource_uri, :action_text => "#{t('actions.search_in', :type => t('resource._singular'))}"} %>
       <% end %>
       <%= render partial: 'shared/children_tree', :locals => {:heading_text => heading_text, :root_node_uri => @result.root_node_uri, :current_node_uri => @result.uri} %>
      </div>
    <% end %>
    
    <!-- display the image viewer and the metadata on the right -->
    <div class="col-sm-8">
      <% if  defined?(comp_id) && !comp_id && !@result['json']['ref_id'].blank? %>
        <span class='ref_id'>[<%=  t('archival_object._public.header.ref_id') %>: <%= @result['json']['ref_id'] %>]</span>
      <% end %>
      
      <!-- we need digital and record_innards in separate rows within this column so Mirador doesn't overlap everything -->
      <div class="row">
        <div class="col-md-12">
          <%= render partial: 'shared/digital', locals: {:dig_objs => @dig} %>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <%= render partial: 'shared/record_innards' %>
        </div>
      </div>
    </div>
  </div>
  <%= render partial: 'shared/modal_actions' %>
</div>
